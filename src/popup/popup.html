<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Context Assistant</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <h1>AI Assistant</h1>
      </div>
      <div style="display: flex; align-items: center; gap: 8px;">
        <div class="toggle-container" title="Enable/Disable Extension">
          <label class="toggle-switch">
            <input type="checkbox" id="extensionToggle" checked>
            <span class="toggle-slider"></span>
          </label>
          <span id="toggleStatus" class="toggle-status">ON</span>
        </div>
        <button id="settingsBtn" class="icon-btn" title="Settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6m6-12h-6m-6 0H1m21 6h-6m-6 0H4"></path>
          </svg>
        </button>
      </div>
    </header>

    <!-- Not Configured View -->
    <div id="notConfiguredView" class="view hidden">
      <div class="empty-state">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        <h2>Welcome to AI Context Assistant</h2>
        <p>To get started, please configure your OpenAI API key in settings.</p>
        <button id="goToSettingsBtn" class="btn btn-primary">Configure Settings</button>
      </div>
    </div>

    <!-- Main View -->
    <div id="mainView" class="view hidden">
      <!-- Status Bar -->
      <div id="statusBar" class="status-bar hidden">
        <span id="statusText"></span>
      </div>

      <!-- Suggestions -->
      <div id="suggestionsContainer" class="suggestions-container">
        <div id="loadingState" class="loading-state hidden">
          <div class="spinner"></div>
          <p>Analyzing context...</p>
        </div>

        <div id="emptyState" class="empty-state">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <p>Focus on an input field to get AI-powered suggestions</p>
        </div>

        <div id="suggestionsList" class="suggestions-list hidden"></div>
      </div>

      <!-- Actions -->
      <div class="actions">
        <button id="refreshBtn" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
          Refresh Suggestions
        </button>
      </div>
    </div>

    <!-- Settings View -->
    <div id="settingsView" class="view hidden">
      <div class="settings-header">
        <button id="backBtn" class="icon-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
        </button>
        <h2>Settings</h2>
      </div>

      <div class="settings-content">
        <!-- API Key Section -->
<section class="settings-section">
  <h3>Groq Cloud Configuration</h3>
  
  <div class="form-group">
    <label for="apiKeyInput">Groq API Key</label>
    <div class="input-with-btn">
      <input type="password" id="apiKeyInput" placeholder="gsk_..." autocomplete="off">
      <button id="toggleApiKeyBtn" class="icon-btn" type="button">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
      </button>
    </div>
    <small>Get free key at <a href="https://console.groq.com/keys" target="_blank" style="color: #4A90E2;">console.groq.com/keys</a> - No credit card required!</small>
  </div>

<div class="form-group">
  <label for="modelSelect">Model</label>
  <select id="modelSelect">
    <option value="llama-3.1-8b-instant">Llama 3.1 8B Instant (Fastest available)</option>
  </select>
  <small>Fast 8B parameter model</small>
</div>

          <button id="testConnectionBtn" class="btn btn-secondary">Test Connection</button>
          <div id="connectionStatus" class="connection-status hidden"></div>
        </section>

        <!-- Features Section -->
        <section class="settings-section">
          <h3>Features</h3>
          
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="enableHistoryTracking">
              <span>Enable History Tracking</span>
            </label>
            <small>Store recent searches for better suggestions</small>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="enableTabAnalysis">
              <span>Enable Tab Analysis</span>
            </label>
            <small>Analyze open tabs for context</small>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="enableAiChatMode">
              <span>Enable AI Chat Mode</span>
            </label>
            <small>Provide prompt refinement suggestions</small>
          </div>
        </section>

        <!-- About Section -->
        <section class="settings-section">
          <h3>About</h3>
          <p class="about-text">
            AI Context Assistant v1.0.0<br>
            Intelligent browser extension for context-aware suggestions
          </p>
          <div class="links">
            <a href="https://github.com/yourusername/ai-context-assistant" target="_blank">GitHub</a>
            <a href="https://github.com/yourusername/ai-context-assistant/issues" target="_blank">Report Issue</a>
          </div>
        </section>

        <!-- Actions -->
        <div class="settings-actions">
          <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
          <button id="clearDataBtn" class="btn btn-danger">Clear All Data</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="popup.js"></script>
</body>
</html>